<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>FairValue VR Store</title>
  <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
</head>

<body>

<a-scene background="color: #0f0f2d">

  <!-- LIGHTING -->
  <a-entity light="type: ambient; intensity: 0.7"></a-entity>
  <a-entity light="type: point; intensity: 2; color: #00ffff" position="0 4 -3"></a-entity>

  <!-- FLOOR -->
  <a-plane rotation="-90 0 0" width="40" height="40" color="#1a1a40"></a-plane>

  <!-- CAMERA -->
  <a-entity id="rig" position="0 0 6">
    <a-camera></a-camera>
  </a-entity>

  <!-- PRODUCTS CONTAINER -->
  <a-entity id="products"></a-entity>

  <!-- PRODUCT INFO PANEL -->
  <a-plane id="infoPanel"
           position="0 3 -3"
           width="4"
           height="2"
           color="#111"
           material="opacity: 0.9"
           visible="false">
  </a-plane>

  <a-text id="infoText"
          position="0 3 -2.9"
          align="center"
          color="#00ffcc"
          width="6">
  </a-text>

  <!-- CART DISPLAY -->
  <a-text id="cartText"
          value="Cart: ₹0"
          position="0 4 -3"
          align="center"
          color="#ffffff"
          width="6">
  </a-text>

</a-scene>

<script>

const products = [
  {name: "VR Headset", price: 299, position: "-3 1.5 -5", color: "#ff4d6d"},
  {name: "Smart Speaker", price: 149, position: "-1 1.5 -5", color: "#00f5d4"},
  {name: "Smart Watch", price: 199, position: "1 1.5 -5", color: "#ffd60a"},
  {name: "VR Controller", price: 99, position: "3 1.5 -5", color: "#9d4edd"}
];

let cart = [];

const container = document.querySelector("#products");

products.forEach((product, index) => {

  let box = document.createElement("a-box");

  box.setAttribute("position", product.position);
  box.setAttribute("color", product.color);
  box.setAttribute("class", "clickable");
  box.setAttribute("animation", "property: rotation; to: 0 360 0; loop: true; dur: 6000");

  box.addEventListener("click", () => {
    cart.push(product);
    updateCart();
    showProductInfo(product);
  });

  container.appendChild(box);

});

function updateCart() {
  const total = cart.reduce((sum, item) => sum + item.price, 0);
  document.querySelector("#cartText")
    .setAttribute("value", "Cart: ₹" + total);
}

function showProductInfo(product) {
  document.querySelector("#infoPanel").setAttribute("visible", true);
  document.querySelector("#infoText")
    .setAttribute("value", product.name + "\n₹" + product.price + "\nAdded to cart!");
}

</script>

</body>
</html>
